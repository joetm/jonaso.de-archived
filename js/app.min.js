function contains(e,a){"use strict";for(var t=e.length;t;)if(t-=1,e[t]===a)return!0;return!1}function browserSupportsCSSProperty(e){"use strict";var a,t,n,o=document.createElement("div");if(e=e.toLowerCase(),void 0!==o.style[e])return!0;for(t=e.charAt(0).toUpperCase()+e.substr(1),n="Webkit Moz ms O".split(" "),a=0;a<n.length;a++)if(void 0!=o.style[n[a]+t])return!0;return!1}function init_map(){L.Icon.Default.imagePath="./js/vendor/leaflet/images";var e=L.icon({iconUrl:"./js/vendor/leaflet/images/marker-icon-gray.png",shadowUrl:"./js/vendor/leaflet/images/marker-shadow.png",iconSize:[18,30],shadowSize:[30,30],iconAnchor:[9,30],shadowAnchor:[9,30],popupAnchor:[9,-3]}),a=L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),t=L.latLng(51,4),n=0,o=!0,r=L.map("location-map",{center:t,zoom:4,layers:[a]});for(n=0;num_places>n;n++)o?(o=!1,L.marker([places[n].lat,places[n].lng]).addTo(r).bindPopup("<b>"+places[n].city+"</b><br />"+places[n].country).openPopup()):L.marker([places[n].lat,places[n].lng],{icon:e}).addTo(r)}var app={},places,words,countries=[],i=0,num_places=0,num_countries=0,years_abroad=0,map={};app.finished=!1,$(app).on("ajax:done",function(){app.finished=!0,(new WOW).init(),console.log("\n         ________________________________\n        |                                |\n________|                                |_______\n\\       |           jonaso.de            |      /\n \\      |                                |     /\n /      |________________________________|     \\\n/__________)                          (_________\\\n")}),$(function(){$.ajax({url:"data/data.json",dataType:"json",cache:!1}).done(function(e){places=e.places,num_places=places.length,words=e.words;var a,t,n;for(i=0;num_places>i;i+=1)contains(countries,places[i].country)||countries.push(places[i].country),places[i].start&&places[i].end&&(a=new Date(places[i].start).getTime(),t="today"!==places[i].end?new Date(places[i].end).getTime():(new Date).getTime(),n=(t-a)/1e3,years_abroad+=n);num_countries=countries.length,years_abroad?(years_abroad=+(years_abroad/31536e3).toFixed(2),$("#map span#years_abroad").text(years_abroad)):$("#map span#years_abroad").parent().hide(),init_map(),$("#tagcloud").jQCloud(words,{removeOverflowing:!1,autoResize:!0})}).fail(function(e,a){"parsererror"===a?console.log("malformed json in data.json"):console.log("ajax failed",a)})});var minicv_tpl_request=$.get("./views/minicv.htm"),minicv_request=$.ajax({method:"GET",url:"./data/mini-cv.json",dataType:"json",headers:{Accept:"application/json"},beforeSend:function(e){e.overrideMimeType("application/json")}});$.when(minicv_request,minicv_tpl_request).done(function(e,a){if(e){var t=$("#cv .timeline"),n=0,o="",r={parsedTpl:doT.template(a),renderTemplate:function(e){return n++,e=e.toJSON(),n%2!==0?(e.li_class=" timeline-inverted",e.timeline_body_alternation="slideInRight"):(e.li_class="",e.timeline_body_alternation="slideInLeft"),this.parsedTpl(e)}};$.each(e,function(e,a){o+=r.renderTemplate(a)}),t.prepend(o),$(app).trigger("ajax:done")}}),$(function(){$("#komasurfer-link").attr("href","http://komasurfer.com/portfolio/"),$("img.lazy").lazyload({threshold:200}),$("footer .copyright").append(" "+(new Date).getFullYear()),$("#map .num_countries").text(num_countries);var e=!1,a=Math.floor(Date.now()/1e3);$.ajax({dataType:"text",method:"POST",url:"./token.php",data:{d:a}}).done(function(a){a&&(e=a)}),$("#simple_form-field-submit").click(function(t){return t.preventDefault(),e&&a&&$.ajax({dataType:"text",url:"http://komasurfer.com/contact.php",data:{token:e,name:$("#simple_form-field-name").val(),email:$("#simple_form-field-email").val(),message:$("#simple_form-field-message").val(),dateline:a}}).done(function(){$("#simple_form-success").html("<div class='alert alert-success'>"),$("#simple_form-success > .alert-success").html("<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;").append("</button>"),$("#simple_form-success > .alert-success").append("<strong>Your message has been sent.</strong>"),$("#simple_form-success > .alert-success").append("</div>"),$(".form-group").remove()}),!1})});