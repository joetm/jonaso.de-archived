function contains(e,t){"use strict";for(var a=e.length;a;)if(a-=1,e[a]===t)return!0;return!1}function browserSupportsCSSProperty(e){"use strict";var t,a,n,o=document.createElement("div");if(e=e.toLowerCase(),void 0!==o.style[e])return!0;for(a=e.charAt(0).toUpperCase()+e.substr(1),n="Webkit Moz ms O".split(" "),t=0;t<n.length;t++)if(void 0!=o.style[n[t]+a])return!0;return!1}function init_map(){L.Icon.Default.imagePath="./js/vendor/leaflet/images";var e=L.icon({iconUrl:"./js/vendor/leaflet/images/marker-icon-gray.png",shadowUrl:"./js/vendor/leaflet/images/marker-shadow.png",iconSize:[18,30],shadowSize:[30,30],iconAnchor:[9,30],shadowAnchor:[9,30],popupAnchor:[9,-3]}),t=L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),a=L.latLng(51,4),n=0,o=!0,i=L.map("location-map",{center:a,zoom:4,layers:[t]});for(n=0;num_places>n;n++)o?(o=!1,L.marker([places[n].lat,places[n].lng]).addTo(i).bindPopup("<b>"+places[n].city+"</b><br />"+places[n].country).openPopup()):L.marker([places[n].lat,places[n].lng],{icon:e}).addTo(i)}var app={},places,words,countries=[],i=0,num_places=0,num_countries=0,years_abroad=0,map={};app.finished=!1,$(app).on("ajax:done",function(){app.finished=!0,(new WOW).init(),console.log("\n         ________________________________\n        |                                |\n________|                                |_______\n\\       |           jonaso.de            |      /\n \\      |                                |     /\n /      |________________________________|     \\\n/__________)                          (_________\\\n")}),$(function(){$.ajax({url:"data/data.json",dataType:"json",cache:!1}).done(function(e){places=e.places,num_places=places.length,words=e.words;var t,a,n;for(i=0;num_places>i;i+=1)contains(countries,places[i].country)||countries.push(places[i].country),places[i].start&&places[i].end&&(t=new Date(places[i].start).getTime(),a="today"!==places[i].end?new Date(places[i].end).getTime():(new Date).getTime(),n=(a-t)/1e3,years_abroad+=n);num_countries=countries.length,years_abroad?(years_abroad=+(years_abroad/31536e3).toFixed(2),$("#map span#years_abroad").text(years_abroad)):$("#map span#years_abroad").parent().hide(),init_map(),$("#tagcloud").jQCloud(words,{removeOverflowing:!1,autoResize:!0})}).fail(function(e,t){"parsererror"===t?console.log("malformed json in data.json"):console.log("ajax failed",t)})});var MiniCVModel=Backbone.Model.extend({urlRoot:"./data/mini-cv.json"}),MiniCVCollection=Backbone.Collection.extend({idAttribute:"_id",url:"./data/mini-cv.json",model:MiniCVModel}),miniCVstations=new MiniCVCollection,MiniCVView=Backbone.View.extend({collection:miniCVstations,el:$("#cv .timeline"),tagName:"li",initialize:function(){this.loadTemplate()},template:!1,loadTemplate:function(){var e=this;$.get("./views/minicv.htm",function(t){Mustache.parse(t),e.template=t,e.render()})},itemNo:0,renderTemplate:function(e){return this.itemNo++,e=e.toJSON(),this.itemNo%2!==0?(e.li_class=" timeline-inverted",e.timeline_body_alternation="slideInRight"):(e.li_class="",e.timeline_body_alternation="slideInLeft"),Mustache.render(this.template,e)},htmlContent:"",render:function(){var e=this;this.collection.fetch().done(function(){e.collection.each(function(t){e.htmlContent+=e.renderTemplate(t)}),e.$el.prepend(e.htmlContent)}),$(app).trigger("ajax:done")}}),miniCVview=new MiniCVView;$(function(){$("#komasurfer-link").attr("href","http://komasurfer.com/portfolio/"),$("img.lazy").lazyload({threshold:200}),$("footer .copyright").append(" "+(new Date).getFullYear()),$("#map .num_countries").text(num_countries);var e=!1,t=Math.floor(Date.now()/1e3);$.ajax({dataType:"text",method:"POST",url:"./token.php",data:{d:t}}).done(function(t){t&&(e=t)}),$("#simple_form-field-submit").click(function(a){return a.preventDefault(),e&&t&&$.ajax({dataType:"text",url:"http://komasurfer.com/contact.php",data:{token:e,name:$("#simple_form-field-name").val(),email:$("#simple_form-field-email").val(),message:$("#simple_form-field-message").val(),dateline:t}}).done(function(){$("#simple_form-success").html("<div class='alert alert-success'>"),$("#simple_form-success > .alert-success").html("<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;").append("</button>"),$("#simple_form-success > .alert-success").append("<strong>Your message has been sent.</strong>"),$("#simple_form-success > .alert-success").append("</div>"),$(".form-group").remove()}),!1})});